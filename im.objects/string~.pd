#N canvas 0 23 760 582 12;
#X obj 74 80 inlet width;
#X obj 169 80 inlet decay;
#X obj 256 80 inlet cutoff;
#X obj -37 295 outlet~;
#N canvas 353 578 194 221 excitation~ 0;
#X obj 31 18 inlet midi_note;
#X obj 101 39 inlet width;
#X obj 30 120 vline~;
#X obj 100 123 noise~;
#X obj 30 154 *~;
#X obj 30 181 outlet~;
#X obj 30 44 bang;
#X obj 74 69 del 5;
#X msg 30 87 1 1;
#X msg 74 90 0 1;
#X connect 0 0 6 0;
#X connect 1 0 7 1;
#X connect 2 0 4 0;
#X connect 3 0 4 1;
#X connect 4 0 5 0;
#X connect 6 0 8 0;
#X connect 6 0 7 0;
#X connect 7 0 9 0;
#X connect 8 0 2 0;
#X connect 9 0 2 0;
#X restore -37 123 pd excitation~;
#N canvas 97 354 669 524 body~ 0;
#X obj 75 232 inlet~;
#X obj 221 274 outlet~;
#X obj 376 -12 block~ 1;
#X obj 75 270 delwrite~ \$0-dl 1000;
#X obj 99 131 delread~ \$0-dl 12;
#X obj 221 179 lop~ 4000;
#X obj 221 226 *~ 0.99;
#X obj 99 -22 mtof;
#X obj 99 8 t b f;
#X obj 99 69 /;
#X msg 92 43 1;
#X obj 99 99 * 1000;
#X obj 99 -55 inlet midi_note;
#X obj 260 202 inlet decay;
#X obj 272 154 inlet cutoff;
#X text 375 -55 Block size needs to be 1 sample for this subpatch to
ensure correct tuning and operation for delay line feedback;
#X text 151 70 Convert a midi note into the required delay line length
(in ms) to generate said pitch.;
#X connect 0 0 3 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 1 0;
#X connect 6 0 3 0;
#X connect 7 0 8 0;
#X connect 8 0 10 0;
#X connect 8 1 9 1;
#X connect 9 0 11 0;
#X connect 10 0 9 0;
#X connect 11 0 4 0;
#X connect 12 0 7 0;
#X connect 13 0 6 1;
#X connect 14 0 5 1;
#X restore -37 245 pd body~;
#X text 124 125 excitation generates a short noise burst the specied
width;
#X text 46 245 body filters the excitation noise in a pitch specific
delay line;
#X obj -38 11 inlet midi_note;
#X msg 96 184 0.785;
#X floatatom 95 216 5 0 0 0 - - -;
#X obj 97 152 sel 1 0;
#X msg 148 184 0.999;
#X text 6 356 based on karplus strong implementation by loomer: http://blog.loomer.co.uk/2010/02/karplus-strong-guitar-string-synthesis.html
;
#X obj -38 35 s \$0-midi_note;
#X obj -36 82 r \$0-midi_note;
#X obj -18 187 r \$0-midi_note;
#X connect 0 0 4 1;
#X connect 1 0 11 0;
#X connect 2 0 5 3;
#X connect 4 0 5 0;
#X connect 5 0 3 0;
#X connect 8 0 14 0;
#X connect 9 0 10 0;
#X connect 10 0 5 2;
#X connect 11 0 9 0;
#X connect 11 1 12 0;
#X connect 12 0 10 0;
#X connect 15 0 4 0;
#X connect 16 0 5 1;
